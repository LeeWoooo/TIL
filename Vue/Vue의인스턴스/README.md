Vue Instance
===

Vue 인스턴스는 뷰로 화면을 개발하기 위해 필수적으로 생성해야 하는 기본단위이다. 뷰 인스턴스를 사용하기 위해서는 <code>new</code>라는 키워드를 이용하여 생성할 수 있다. 아래와 같이 생성하면 인스턴스를 생성하게 된다.

```javascript
new Vue({
    //인스턴스 영역
})
```

Vue의 인스턴스 영역 안에 여러 Option들을 추가할 수 있다. 대표적으로 <code>el</code>라는 속성이 있는데 Vue 인스턴스가 그려질 지점을 지정하는 것이다. (Vue를 집어넣을 HTML요소를 지정하는 것)

<hr>

### Vue 인스턴스 옵션 속성

Vue 인스턴스 옵션 속성은 인스턴스를 생성할 때 재정의할 data,el,template 등의 속성을 의미합니다.

* el : Vue의 인스턴스로 만든 화면이 그려지는 시작점을 의미한다. DOM객체와 연결을 해주며 속성의 값으로 CSS의 선택자를 사용할 수 있으며 **반드시 하나의 DOM과 연결된다는 것이다.**

* data : Vue의 인스턴스에서 사용되는 data이다. Vue의 인스턴스가 생성될 때 data 객체에 있는 모든 속성은 Vue의 **반응형 시스템**에 추가가 된다. 각 속성값이 변경될 때 Vue가 반응하여 새로운 값과 일치하도록 다시 랜더링한다. (인스턴스가 생성된 이후에 추가되는 값은 반응형에 포함되지 않는다.)

* template : 화면에 표시할 HTML,CSS등의 마크업 요소를 정의하는 속성, View의 데이터 및 기타 속성들도 함게 화면에 그릴 수 있다.

이 외에도 다양한 옵션들이 존재한다 공식 ref참조(https://kr.vuejs.org/v2/api/#search-form)


<hr>

### Vue 인스턴스의 유효범위

Vue를 생성하면 HTML의 특정 범위 안에서만 옵션 속성들이 적용되어 나타난다. 이를 인스턴스의 유효범위라 한다. 인스턴스의 유효범위는 el속성과 밀접한 관계가 있다.

인스턴스의 유효범위를 이해하려면 인스턴스가 생성된 후 화면이 어떻게 적용되는지 알아야 한다. <code>new Vue()</code>로 인스턴스를 생성하고 나서 화면에 인스턴스 옵션 속성을 적용하는 과정은 아래와 같다.

* 순서

    Vue 라이브러리 파일 로딩 -> 인스턴스 객체 생성(옵션 포함) -> 특정 화면 요소에 인스턴스를 붙임 -> 인스턴스 내용이 화면 요소로 변환 -> 변환된 화면 요소를 사용자가 최종적으로 확인


* code

    ```javascript
    new Vue({
        //인스턴스 영역
    })
    //예제

    <div id="app">
        {{message}}
    </div>
    {{message}}

    <script>
        new Vue({
            el:'#app',
            data:{
                message: 'Hello'
            }
        })
    </script>
    ```


위와 같은 코드가 있다면 인스턴스 영역 안에 있는 <code>{{message}}</code>는 Vue인스턴스 속성 중 data안에 있는 message가 바인딩 되지만 인스턴스 영역 안에 있는 {{message}}는 문자열 그대로 보여진다.

* 결과
    ```
    Hello
    {{message}}
    ```

<hr>

### Vue 인스턴스 라이프 사이클

인스턴스의 상태에 따라 호출할 수 있는 속성들을 라이프 사이클(life cycle) 속성이라 한다. **각 라이프 사이클 속성에서 실행되는 커스텀 로직을 라이프 사이클 훅(hook)이라한다.**

* 사진

    <img src = https://kr.vuejs.org/images/lifecycle.png>

라이프 사이클 단계를 크게 나누면 인스턴스 **생성**, 생성된 인스턴스를 화면에 **부착**, 화면에 부착된 인스턴스의 내용이 **갱신**, 인스턴스가 제거되는 **소멸**의 4단계로 이루어진다.

* beforeCreate : 인스턴스가 생성되고 나서 ```가장 처음으로 실행되는 라이프 사이클 단계이다.``` **이 단계에서는 data속성과 methods 속성이 아직 인스턴스에 정의되어 있지 않고 DOM과 같은 화면 요소에도 접근을 할 수 없다.**

* created : beforeCreate 다음에 실행이 되며 **data 속성과 methods 속성이 정의되어있기 때문에 접근이 가능하다 하지만 아직 인스턴스가 화면 요소에 부착되기 전이기 때문에 template 속성에 정의된 DOM 요소에는 접근을 할 수 없다.**

* beforeMount : created 단계 이후 template 속성에 지정한 마크업 속성을 render() 함수로 변환 후 el 속성에 지정한 DOM에 인스턴스를 부착하기 전이다. (render() 함수는 자바스크립트로 화면의 돔을 그리는 함수이다.)

* mounted : el 속성에 지정한 화면 요소에 인스턴스가 부착되고 나면 호출되는 단계이다. template 속성에 정의한 화면 요소에 접근을 할 수 있어 **화면 요소를 제어하는 로직을 수행하기 좋은 단계이다.** ```DOM에 인스턴스가 부착되자마자 바로 호출되기 때문에 하위 컴포넌트나 외부 라이브러리에 의해 추가된 화면 요소들이 최종 HTML 코드로 변환되는 시점과 다를 수 있다.```
(변환되는 시점이 다를 경우 $nextTick() API를 활용하여 HTML 코드로 최종 변환될 때까지 기다린 후 DOM제어 로직을 추가하는 방법도 있다.)

* beforeUpdate : el 속성에서 지정한 화면 요소에 인스턴스가 부착되고 나면 인스턴스에 정의한 속성들이 화면에 치환되는데 $watch속성으로 감시를한다. 데이터가 변경되면 가상 DOM화면을 다시 그리기 전에 호출되는 단계로 변경 예정인 새 데이터에 접근할 수 있어 변경 예정 데이ㅓ의 값과 관련된 로직을 미리 넣을 수 있다. **값을 변경하는 로직을 넣더라도 화면이 다시 그려지지는 않는다.**

* updated : 데이터가 변경되고 나서 가상DOM으로 다시 화면을그리고 나면 실행이 된다. ```이 시점에서는 데이터 변경 후 화면 요소 제어와 관련된 로직을 추가하기 좋은 단계이다.``` **또한 이 단계에서 데이터 값을 변경하면 무한 루프에 빠질수 있기 떄문에 값을 변경하려면 computed,watch와 같은 속성을 사용해야한다.**

* beforeDestory : Vue인스턴스가 파괴되기 직전에 호출되는 단계이다. ```Vue 인스턴스의 데이터를 삭제하기 좋은단계.```

* destroyed : Vue인스턴스가 파괴되고 나서 호출되는 단계이다. ```Vue인스턴스에 정의한 모든 속성이 제거되고 하위에 선언한 인스턴스들 또한 모두 파괴된다.```

